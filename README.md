# Counter-Rotating-Hoop-Stabilizer-and-SVR-Control-for-Two-Wheels-Vehicle-Applications

### Abstract
The matter of stabilization has always attracted attention from both academia and industry. In the case of bikes, kickboards, and scooters, simple stabilizer designs have been explored but are rarely applied in commercial products. In this research, a small-scale, customizable, two-wheels design, is proposed and connected to a retroactive closed-loop control unit for the automatic correction of the destabilization during the motion. The design is based on two counter-rotating wheels, spun into motion at the beginning of the ride and controlled by an Inertial Measurement Unit (IMU) sensor. The two DC motors controlling the spinning of the balancing wheels are adjusted by means of Pulse Width Modulation (PWM) input in the 0 ∼ 255 PWM range. The control is based on an ARDUINO Uno Rev3 microcontroller and on a Support Vector Regression (SVR) model coupled with a Radial Basis Function (RBF) kernel. If an angular deviation outside the user-defined range is detected by the IMU sensor, the trained SVR-RBF model predicts the required PWM value to reestablish equilibrium and sends the signals to one or both DC motors. The proposed architecture was trained and validated in a ±21° range, resulting in a 100% correction accuracy up to a ±23° range, whereas, for greater angles up to ±30°, a drop in performances was observed. In addition to that, when a random acceleration in the ±6°/ s2 range was applied, the proposed design showed a remarkable capability of predicting the correct PWM values, for both reaction wheels, capable of reestablishing equilibrium in the system within an average intervention time equal to 1.28s.

<br>

### Research objectives and concepts
![image](https://github.com/chaninjung/Counter-Rotating-Hoop-Stabilizer-and-SVR-Control-for-Two-Wheels-Vehicle-Applications/assets/156671303/8c87fb2d-ca13-4057-9510-92356f214d92) </p>
We have researched and developed a prototype that can balance and control unstable systems such as two-wheeled bicycles at the desired set point using Support Vector Regression (SVR). The purpose of this study was to propose a PID-controlled counteracting wheel stabilizer again with the new HW/SW approach.
First, in order to propose a new hardware design, we wanted to supplement the fact that only one reaction wheel was used for two-way control. Therefore, in this study, we decided to apply two reaction wheels facing each other in a counter-rotating hoop method. Therefore, the Arduino cord is also set to take charge of balance control within +/ – angle range so that balance control is faster in both directions in line with the concept. In addition, in order to propose a new software design, the part that previously controlled the tilted system using PID control was to predict the required Pulse Width Modulation (PWM) value per tilted angle through Support Vector Machine (SVR) machine learning.

<br>

### Training data
![image](https://github.com/chaninjung/Counter-Rotating-Hoop-Stabilizer-and-SVR-Control-for-Two-Wheels-Vehicle-Applications/assets/156671303/7e085069-efd6-4d6d-a4db-82da897a0640) </p>
At the beginning of the study, the training data was generated by measuring the PWM required for 3, 6, 9, 12, 15, 18, and 21 three times for each slope. Based on this, the objective function predicted by SVR was driven by Arduino in hardware, but it was less accurate than expected and could not be expected to stabilize at the set point. To address this, it was decided to increase the reliability of the training data by adding a fixture to keep the real-time angle measurement using the IMU sensor more constant. Afterwards, based on the newly acquired training data, the objective function for the PWM value required for each tilted angle was predicted through SVR machine learning.

<br>

### Validation and kernel selection
![image](https://github.com/chaninjung/Counter-Rotating-Hoop-Stabilizer-and-SVR-Control-for-Two-Wheels-Vehicle-Applications/assets/156671303/c25e5ae1-47a7-4aba-9022-fa3d4bb1b8cc) </p>
In order to obtain the optimal objective function, the optimization of Hyperparameters was obtained through the Gridsearch method, and it went through the test and verification steps to prevent overfitting. In addition, k-fold verification was performed again to select the appropriate kernel among the representative kernel functions, such as Linear, Polynomial, and Radial Basis Function (RBF) kernels. Among them, the RBF kernel showed the highest correlation coefficient (98.2%) between the experimental value and the SVR predicted value, so it was considered the most suitable and used for further steps in the study.

<br>

### Results of the study
![image](https://github.com/chaninjung/Counter-Rotating-Hoop-Stabilizer-and-SVR-Control-for-Two-Wheels-Vehicle-Applications/assets/156671303/dbbfe59a-7363-46f4-9ca8-3f638db90854) </p>
![image](https://github.com/chaninjung/Counter-Rotating-Hoop-Stabilizer-and-SVR-Control-for-Two-Wheels-Vehicle-Applications/assets/156671303/10b84cc8-e90a-4691-a9ce-59baf31115d7) </p>
For the performance evaluation of the system, we tested 10 times to see if it was possible to recover from a specific tilt angle (11˚, 16˚, 20˚, 23˚, 25˚, 30˚) to the correct range (±5˚). As a result, the system was able to maintain 100% equilibrium within an average of 2.13 seconds until the maximum tilt of 23˚, and at the above tilt angles of 25˚ and 30˚, the motor's specifications could not produce enough angular momentum to overcome the inertial force, resulting in poor calibration accuracy.
In addition, experiments have confirmed that when the system at the set point (0˚) is pushed by hand to give random acceleration, it is possible to restore equilibrium in an average of 1.28 seconds after tilting from a minimum of 10.15˚ to a maximum of 19.89˚.





